<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agile Project Management - Practice Exam</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: #f0f0f0;
      color: #2d3d3d;
      line-height: 1.6;
      padding: 0;
      margin: 0;
      min-height: 100vh;
    }

    .exam-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Setup Screen */
    .setup-screen {
      background: white;
      padding: 40px 50px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      max-width: 700px;
      margin: 0 auto;
    }

    .setup-screen h1 {
      font-family: 'DM Sans', sans-serif;
      font-size: 1.8rem;
      color: #2d3d3d;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .setup-screen p {
      font-size: 0.95rem;
      color: #5a7070;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .timer-item {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
    }

    .timer-item .info-label {
      color: rgba(255, 255, 255, 0.9);
    }

    .timer-value {
      color: white !important;
      font-size: 1.5rem !important;
      font-weight: 700;
      font-family: 'Courier New', monospace;
    }

    .timer-warning {
      animation: pulse-timer 1s ease-in-out infinite;
    }

    @keyframes pulse-timer {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .setup-options {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 25px;
    }

    .option-group {
      width: 100%;
    }

    .option-label {
      font-size: 0.95rem;
      color: #2d3d3d;
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
    }

    .exam-select {
      width: 100%;
      padding: 10px 15px;
      font-size: 0.95rem;
      border: 2px solid #d0d0d0;
      border-radius: 6px;
      background: white;
      color: #2d3d3d;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'DM Sans', sans-serif;
    }

    .exam-select:hover {
      border-color: #2d87a8;
    }

    .exam-select:focus {
      outline: none;
      border-color: #2d87a8;
      box-shadow: 0 0 0 3px rgba(45, 135, 168, 0.1);
    }

    .welcome-message {
      font-size: 1.1rem;
      color: #2d87a8;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .closing-message {
      font-size: 0.95rem;
      color: #2d3d3d;
      font-weight: 600;
      margin-top: 15px;
      font-style: italic;
    }

    .start-exam-btn {
      width: 100%;
      padding: 14px 35px;
      background: #2d87a8;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(45, 135, 168, 0.3);
      margin-top: 10px;
    }

    .start-exam-btn:hover:not(:disabled) {
      background: #236b8a;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(45, 135, 168, 0.4);
    }

    .start-exam-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
      background: #6a8a9a;
    }

    /* Exam Screen */
    .exam-screen {
      display: none;
    }

    .exam-header {
      background: white;
      padding: 25px 30px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .home-btn {
      padding: 12px 25px;
      background: #2d87a8;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(45, 135, 168, 0.3);
      white-space: nowrap;
    }

    .home-btn:hover {
      background: #236b8a;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(45, 135, 168, 0.4);
    }

    .exam-info {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }

    .info-item {
      display: flex;
      flex-direction: column;
    }

    .info-label {
      font-size: 0.85rem;
      color: #5a7070;
      font-weight: 600;
      text-transform: uppercase;
    }

    .info-value {
      font-size: 1.3rem;
      color: #2d87a8;
      font-weight: 700;
    }

    .question-card {
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }

    .question-number {
      font-size: 0.9rem;
      color: #1a8a8a;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 15px;
    }

    .question-text {
      font-size: 1.3rem;
      color: #2d3d3d;
      font-weight: 600;
      margin-bottom: 30px;
      line-height: 1.5;
    }

    .answers-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .answer-option {
      padding: 20px 25px;
      background: #f8f9fa;
      border: 3px solid #e0e0e0;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .answer-option:hover {
      border-color: #2d87a8;
      background: rgba(45, 135, 168, 0.05);
      transform: translateX(5px);
    }

    .answer-option.selected {
      border-color: #2d87a8;
      background: rgba(45, 135, 168, 0.1);
    }

    .answer-option.correct {
      border-color: #10b981;
      background: #d1fae5;
    }

    .answer-option.incorrect {
      border-color: #ef4444;
      background: #fee2e2;
    }

    .answer-option.disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .answer-letter {
      width: 40px;
      height: 40px;
      background: white;
      border: 2px solid #2d87a8;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #2d87a8;
      flex-shrink: 0;
    }

    .answer-option.correct .answer-letter {
      background: #10b981;
      border-color: #10b981;
      color: white;
    }

    .answer-option.incorrect .answer-letter {
      background: #ef4444;
      border-color: #ef4444;
      color: white;
    }

    .answer-text {
      flex: 1;
      font-size: 1.05rem;
    }

    .feedback-box {
      margin-top: 30px;
      padding: 25px;
      border-radius: 12px;
      display: none;
    }

    .feedback-box.show {
      display: block;
      animation: slideDown 0.4s ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .feedback-box.correct {
      background: #d1fae5;
      border: 2px solid #10b981;
    }

    .feedback-box.incorrect {
      background: #fee2e2;
      border: 2px solid #ef4444;
    }

    .feedback-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 15px;
      font-size: 1.2rem;
      font-weight: 700;
    }

    .feedback-box.correct .feedback-header {
      color: #10b981;
    }

    .feedback-box.incorrect .feedback-header {
      color: #ef4444;
    }

    .feedback-icon {
      font-size: 2rem;
    }

    .feedback-explanation {
      font-size: 1rem;
      color: #2d3d3d;
      line-height: 1.7;
    }

    .feedback-explanation strong {
      color: #0f6868;
    }

    .nav-buttons {
      display: flex;
      justify-content: space-between;
      gap: 15px;
      margin-top: 30px;
    }

    .nav-btn {
      padding: 15px 35px;
      background: #2d87a8;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .nav-btn:hover {
      background: #236b8a;
      transform: translateY(-2px);
    }

    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .nav-btn.secondary {
      background: #5a7070;
    }

    .nav-btn.secondary:hover {
      background: #4a6060;
    }

    /* Results Screen */
    .results-screen {
      display: none;
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      max-height: 90vh;
      overflow-y: auto;
    }

    .results-header {
      text-align: center;
      margin-bottom: 30px;
      position: sticky;
      top: 0;
      background: white;
      padding: 20px 0;
      z-index: 10;
      border-bottom: 3px solid #2d87a8;
    }

    .results-score {
      font-size: 4rem;
      font-weight: 700;
      color: #2d87a8;
      line-height: 1;
      margin-bottom: 10px;
    }

    .results-message {
      font-size: 1.5rem;
      font-weight: 700;
      color: #3d4f5c;
      margin-bottom: 8px;
    }

    .results-detail {
      font-size: 1rem;
      color: #5a7070;
    }

    .results-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }

    .stat-card {
      background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f2 100%);
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      border: 2px solid #2d87a8;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: #2d87a8;
      line-height: 1;
    }

    .stat-label {
      font-size: 0.85rem;
      color: #5a7070;
      font-weight: 600;
      margin-top: 5px;
    }

    .review-section {
      margin-bottom: 25px;
    }

    .review-title {
      font-size: 1.3rem;
      color: #3d4f5c;
      font-weight: 700;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 3px solid #2d87a8;
    }

    .review-item {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 15px;
      border-left: 5px solid #d0d0d0;
    }

    .review-item.correct {
      border-left-color: #10b981;
      background: #f0fdf4;
    }

    .review-item.incorrect {
      border-left-color: #ef4444;
      background: #fef2f2;
    }

    .review-question {
      font-size: 1rem;
      font-weight: 600;
      color: #2d3d3d;
      margin-bottom: 10px;
    }

    .review-answers {
      margin: 10px 0;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .review-answer-line {
      font-size: 0.9rem;
      color: #5a7070;
    }

    .review-answer-line.your-answer {
      color: #2d3d3d;
      font-weight: 600;
    }

    .review-answer-line.correct-answer {
      color: #10b981;
      font-weight: 600;
    }

    .review-explanation {
      margin-top: 10px;
      padding: 12px;
      background: white;
      border-radius: 8px;
      font-size: 0.9rem;
      color: #2d3d3d;
      line-height: 1.5;
    }

    .results-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      position: sticky;
      bottom: 0;
      background: white;
      padding: 20px;
      border-top: 3px solid #2d87a8;
      margin: 0 -30px -30px -30px;
      z-index: 10;
    }

    .action-btn {
      padding: 15px 35px;
      background: linear-gradient(135deg, #2d87a8 0%, #3d9ec4 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 25px rgba(45, 135, 168, 0.3);
    }

    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(45, 135, 168, 0.4);
    }

    .action-btn.secondary {
      background: linear-gradient(135deg, #5a7070 0%, #6a8080 100%);
    }

    @media (max-width: 768px) {
      .setup-screen,
      .results-screen {
        padding: 30px 20px;
      }

      .question-card {
        padding: 25px 20px;
      }

      .exam-header {
        padding: 20px;
      }

      .exam-info {
        flex-direction: column;
        gap: 15px;
        width: 100%;
      }

      .nav-buttons {
        flex-direction: column;
      }

      .results-score {
        font-size: 3.5rem;
      }

      .results-message {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="exam-container">
    <!-- Setup Screen -->
    <div class="setup-screen" id="setupScreen">
      <h1>Agile Project Management - Practice Exam</h1>
      
      <p class="welcome-message">Welcome Group 1!</p>
      
      <p>Three exam sets. Choose your exam and number of questions. Questions are randomized each time. You'll see feedback after every question and a full review at the end.</p>
      
      <p style="color: #2d87a8; font-weight: 600; margin-bottom: 30px;">
        ‚è±Ô∏è Exams are timed: 15 minutes for 10 questions, 30 minutes for 20 questions, and 60 minutes for 40 questions.
      </p>

      <div class="setup-options">
        <div class="option-group">
          <label class="option-label">Select exam:</label>
          <select id="versionSelect" class="exam-select">
            <option value="">Choose exam version...</option>
            <option value="1">Exam 1</option>
            <option value="2">Exam 2</option>
            <option value="3">Exam 3</option>
          </select>
        </div>

        <div class="option-group">
          <label class="option-label">Questions:</label>
          <select id="questionsSelect" class="exam-select">
            <option value="">Choose number...</option>
            <option value="10" data-time="15">10</option>
            <option value="20" data-time="30">20</option>
            <option value="40" data-time="60">40</option>
          </select>
        </div>
      </div>

      <p class="closing-message">Good Luck with your Final Exam and your Future Endeavours. -Bryce</p>

      <button class="start-exam-btn" id="startExamBtn" disabled>Start Exam</button>
    </div>

    <!-- Exam Screen -->
    <div class="exam-screen" id="examScreen">
      <div class="exam-header">
        <div class="exam-info">
          <div class="info-item">
            <span class="info-label">Version</span>
            <span class="info-value" id="currentVersion">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">Progress</span>
            <span class="info-value" id="progressCounter">0/0</span>
          </div>
          <div class="info-item">
            <span class="info-label">Score</span>
            <span class="info-value" id="currentScore">0</span>
          </div>
          <div class="info-item timer-item">
            <span class="info-label">Time Remaining</span>
            <span class="info-value timer-value" id="timerDisplay">00:00</span>
          </div>
        </div>
        <button class="home-btn" id="homeBtn" title="Return to Home" onclick="document.getElementById('examScreen').style.display='none'; document.getElementById('setupScreen').style.display='block'; return false;">
          üè† Home
        </button>
      </div>

      <div class="question-card">
        <div class="question-number" id="questionNumber">Question 1 of 10</div>
        <div class="question-text" id="questionText">Loading question...</div>
        
        <div class="answers-list" id="answersList">
          <!-- Answers will be populated here -->
        </div>

        <div class="feedback-box" id="feedbackBox">
          <div class="feedback-header">
            <span class="feedback-icon">‚úì</span>
            <span>Feedback</span>
          </div>
          <div class="feedback-explanation" id="feedbackText"></div>
        </div>

        <div class="nav-buttons">
          <button class="nav-btn secondary" id="prevBtn">‚Üê Previous</button>
          <button class="nav-btn" id="nextBtn">Next ‚Üí</button>
          <button class="nav-btn" id="submitBtn" style="display:none;">Submit Answer</button>
          <button class="nav-btn" id="finishBtn" style="display:none;" onclick="console.log('Inline onclick fired!'); showResults(); return false;">üìä View Complete Results</button>
        </div>
      </div>
    </div>

  <script>
    // Question Bank - Organized by topic
    const questionBank = {
      // From professor's exam blueprint
      agileFundamentals: [
        {
          question: "Which of the following is a characteristic of Agile methodology?",
          answers: [
            "Fixed scope and requirements",
            "Linear and sequential approach",
            "Iterative and incremental approach",
            "Emphasis on documentation"
          ],
          correct: 2,
          explanation: "Agile methodology is characterized by an iterative and incremental approach, delivering work in small chunks rather than all at once. This allows for continuous feedback and adaptation."
        },
        {
          question: "In which scenario is the Waterfall methodology most effective?",
          answers: [
            "Projects with frequently changing requirements",
            "Projects requiring continuous feedback",
            "Projects with well-defined requirements and scope",
            "Projects emphasizing collaboration"
          ],
          correct: 2,
          explanation: "Waterfall is most effective when requirements are well-defined and unlikely to change, as it follows a linear, sequential approach where each phase must be completed before the next begins."
        },
        {
          question: "What is a key principle stated in the Agile Manifesto?",
          answers: [
            "Comprehensive documentation over working software",
            "Following a plan over responding to change",
            "Individuals and interactions over processes and tools",
            "Contract negotiation over customer collaboration"
          ],
          correct: 2,
          explanation: "The Agile Manifesto values 'Individuals and interactions over processes and tools,' emphasizing that people and their communication are more important than rigid processes."
        },
        {
          question: "Which Agile value emphasizes delivering functional products over extensive documentation?",
          answers: [
            "Customer collaboration over contract negotiation",
            "Working software over comprehensive documentation",
            "Responding to change over following a plan",
            "Individuals and interactions over processes and tools"
          ],
          correct: 1,
          explanation: "The Agile Manifesto states 'Working software over comprehensive documentation,' meaning that while documentation has value, a functioning product is more important."
        }
      ],

      scrumFramework: [
        {
          question: "What is the primary purpose of a Sprint in Scrum?",
          answers: [
            "To plan the project",
            "To deliver a potentially shippable product increment",
            "To review the project's progress",
            "To document requirements"
          ],
          correct: 1,
          explanation: "The primary purpose of a Sprint is to deliver a potentially shippable product increment. Sprints are time-boxed iterations (typically 2-4 weeks) that result in a working product."
        },
        {
          question: "Which of the following is NOT a Scrum event?",
          answers: [
            "Sprint Planning",
            "Daily Scrum",
            "Sprint Review",
            "Project Kickoff"
          ],
          correct: 3,
          explanation: "Project Kickoff is not a Scrum event. The five Scrum events are: Sprint, Sprint Planning, Daily Scrum, Sprint Review, and Sprint Retrospective."
        },
        {
          question: "How long is a typical Sprint in Scrum?",
          answers: [
            "1 week",
            "2-4 weeks",
            "6-8 weeks",
            "3 months"
          ],
          correct: 1,
          explanation: "A typical Sprint lasts 2-4 weeks. This time-box provides enough time to deliver meaningful work while maintaining the agility to respond to change."
        },
        {
          question: "What does 'time-boxed' mean in Scrum?",
          answers: [
            "Events can run as long as needed",
            "Events have a maximum duration that cannot be exceeded",
            "Events must always take the full allocated time",
            "Events are scheduled in a box-shaped room"
          ],
          correct: 1,
          explanation: "Time-boxed means events have a maximum duration that cannot be exceeded. This ensures efficiency and prevents meetings from running too long."
        }
      ],

      scrumRoles: [
        {
          question: "Who is responsible for managing the product backlog in Scrum?",
          answers: [
            "Scrum Master",
            "Development Team",
            "Product Owner",
            "Project Manager"
          ],
          correct: 2,
          explanation: "The Product Owner is responsible for managing the product backlog, including prioritizing items, ensuring clarity, and maximizing the value of the product."
        },
        {
          question: "Which role in Scrum is responsible for facilitating the Scrum process?",
          answers: [
            "Product Owner",
            "Scrum Master",
            "Development Team",
            "Stakeholder"
          ],
          correct: 1,
          explanation: "The Scrum Master is responsible for facilitating the Scrum process, coaching the team, removing impediments, and ensuring Scrum is understood and enacted."
        },
        {
          question: "What is the primary responsibility of the Development Team?",
          answers: [
            "Prioritize the product backlog",
            "Remove impediments",
            "Deliver a potentially releasable increment each Sprint",
            "Manage stakeholder expectations"
          ],
          correct: 2,
          explanation: "The Development Team is responsible for delivering a potentially releasable increment of working product at the end of each Sprint."
        },
        {
          question: "Which Scrum role represents the voice of the customer?",
          answers: [
            "Scrum Master",
            "Development Team",
            "Product Owner",
            "Stakeholder"
          ],
          correct: 2,
          explanation: "The Product Owner represents the voice of the customer and stakeholders, ensuring the team builds the right product with maximum value."
        }
      ],

      scrumEvents: [
        {
          question: "What is the purpose of the Sprint Retrospective?",
          answers: [
            "To plan the next Sprint",
            "To inspect the product increment",
            "To reflect on the past Sprint and plan improvements",
            "To update the product backlog"
          ],
          correct: 2,
          explanation: "The Sprint Retrospective is held at the end of each Sprint for the team to reflect on what went well, what didn't, and plan improvements for the next Sprint."
        },
        {
          question: "How long is a typical Daily Scrum meeting?",
          answers: [
            "5 minutes",
            "15 minutes",
            "30 minutes",
            "60 minutes"
          ],
          correct: 1,
          explanation: "The Daily Scrum is time-boxed to 15 minutes. This short duration forces the team to stay focused on the three key questions and coordinate their work efficiently."
        },
        {
          question: "What happens during Sprint Planning?",
          answers: [
            "The team demonstrates completed work",
            "The team selects items from the product backlog and plans how to deliver them",
            "The team discusses what went well and what to improve",
            "The team synchronizes daily activities"
          ],
          correct: 1,
          explanation: "During Sprint Planning, the team selects product backlog items for the upcoming Sprint and creates a plan (Sprint Backlog) for how to deliver the selected work."
        },
        {
          question: "Who attends the Sprint Review?",
          answers: [
            "Only the Development Team",
            "The Scrum Team and stakeholders",
            "Only the Product Owner and Scrum Master",
            "External auditors only"
          ],
          correct: 1,
          explanation: "The Sprint Review is attended by the Scrum Team (Product Owner, Scrum Master, Development Team) and key stakeholders to inspect the increment and adapt the product backlog."
        }
      ],

      scrumArtifacts: [
        {
          question: "What does the Sprint Backlog contain?",
          answers: [
            "All product backlog items",
            "Selected product backlog items for the Sprint and a plan for delivering them",
            "Completed product backlog items from previous Sprints",
            "List of all tasks to be completed in the project"
          ],
          correct: 1,
          explanation: "The Sprint Backlog contains the product backlog items selected for the Sprint plus the plan for delivering them. It's the Development Team's plan for the Sprint."
        },
        {
          question: "Which artifact represents the sum of all completed product backlog items during a Sprint?",
          answers: [
            "Product Backlog",
            "Sprint Backlog",
            "Increment",
            "Burndown Chart"
          ],
          correct: 2,
          explanation: "The Increment is the sum of all product backlog items completed during a Sprint and all previous Sprints. It must be in a usable condition and meet the Definition of Done."
        },
        {
          question: "Who owns the Product Backlog?",
          answers: [
            "The entire Scrum Team",
            "The Product Owner",
            "The Scrum Master",
            "The Development Team"
          ],
          correct: 1,
          explanation: "The Product Owner owns the Product Backlog and is responsible for its content, prioritization, and ensuring it's visible and understood by the team."
        },
        {
          question: "What is the Definition of Done?",
          answers: [
            "When the Sprint ends",
            "When the Product Owner says it's done",
            "A shared understanding of what it means for work to be complete",
            "When all bugs are fixed"
          ],
          correct: 2,
          explanation: "The Definition of Done is a shared understanding among the team of what criteria must be met for work to be considered complete, ensuring quality and transparency."
        }
      ],

      agileEstimation: [
        {
          question: "What are Story Points used for in Agile estimation?",
          answers: [
            "Measuring the time taken to complete a task",
            "Expressing the overall size of a user story or feature",
            "Calculating the cost of a project",
            "Tracking project progress"
          ],
          correct: 1,
          explanation: "Story Points express the overall size, complexity, and effort of a user story or feature, not time. They're a relative measure comparing stories to each other."
        },
        {
          question: "Which technique involves team members using cards to vote on the estimate?",
          answers: [
            "Velocity",
            "Planning Poker",
            "Story Points",
            "Burndown Chart"
          ],
          correct: 1,
          explanation: "Planning Poker is an estimation technique where team members use cards to vote on estimates simultaneously, reducing bias and encouraging discussion."
        },
        {
          question: "What is Velocity in Agile?",
          answers: [
            "How fast developers type code",
            "The amount of work a team completes in a Sprint",
            "The speed of Sprint Planning meetings",
            "How quickly bugs are fixed"
          ],
          correct: 1,
          explanation: "Velocity is the amount of work (measured in story points or other units) that a team completes in a Sprint. It helps with Sprint planning and forecasting."
        },
        {
          question: "Why do Agile teams use relative estimation instead of time-based estimation?",
          answers: [
            "It's easier to calculate",
            "It's more accurate because it compares work to other work, not to time",
            "It requires less meetings",
            "It's mandated by Scrum"
          ],
          correct: 1,
          explanation: "Relative estimation is more accurate because humans are better at comparing things to each other than estimating absolute time. Story points compare complexity, not predict hours."
        }
      ],

      leadershipAgile: [
        {
          question: "What is the focus of servant leadership in Agile?",
          answers: [
            "Directing team members",
            "Serving the team and enabling their success",
            "Managing project scope",
            "Documenting requirements"
          ],
          correct: 1,
          explanation: "Servant leadership focuses on serving the team by removing obstacles, providing resources, and enabling team success rather than commanding and controlling."
        },
        {
          question: "Which strategy encourages team members to take ownership and make decisions?",
          answers: [
            "Collaboration",
            "Empowerment",
            "Servant Leadership",
            "Micromanagement"
          ],
          correct: 1,
          explanation: "Empowerment encourages team members to take ownership of their work and make decisions, fostering accountability and innovation."
        },
        {
          question: "What does 'self-organizing team' mean in Agile?",
          answers: [
            "The team works without any leadership",
            "The team decides how to accomplish their work without being directed",
            "The team doesn't need to communicate",
            "The team can ignore the Product Owner"
          ],
          correct: 1,
          explanation: "A self-organizing team decides how to best accomplish their work rather than being directed by others outside the team. They still collaborate with the Product Owner and Scrum Master."
        }
      ],

      kanban: [
        {
          question: "What is the purpose of Work In Progress (WIP) limits in Kanban?",
          answers: [
            "To increase the number of tasks in progress",
            "To improve flow and reduce bottlenecks",
            "To track project progress",
            "To document requirements"
          ],
          correct: 1,
          explanation: "WIP limits improve flow by limiting how many items can be in progress at once. This reduces bottlenecks, context switching, and helps identify process issues."
        },
        {
          question: "Which tool is used to visualize work stages in Kanban?",
          answers: [
            "Burndown Chart",
            "Kanban Board",
            "Product Backlog",
            "Sprint Backlog"
          ],
          correct: 1,
          explanation: "A Kanban Board visualizes work stages (like To Do, In Progress, Done) and shows the flow of work items through the process."
        },
        {
          question: "What is a key principle of Kanban?",
          answers: [
            "Start with fixed iterations",
            "Visualize the workflow",
            "Assign work to individuals",
            "Estimate everything in hours"
          ],
          correct: 1,
          explanation: "A key Kanban principle is to visualize the workflow, making the work and its flow visible so problems can be identified and addressed."
        },
        {
          question: "How does Kanban differ from Scrum?",
          answers: [
            "Kanban uses time-boxed iterations while Scrum has continuous flow",
            "Kanban has continuous flow while Scrum uses time-boxed iterations",
            "Kanban requires a Scrum Master",
            "Kanban doesn't allow any meetings"
          ],
          correct: 1,
          explanation: "Kanban emphasizes continuous flow without time-boxed iterations, while Scrum works in time-boxed Sprints. Both are valid Agile approaches with different strengths."
        }
      ],

      leanPrinciples: [
        {
          question: "What does it mean to eliminate waste in Lean programming?",
          answers: [
            "Removing non-value-adding activities",
            "Increasing documentation",
            "Extending project timelines",
            "Adding more features"
          ],
          correct: 0,
          explanation: "Eliminating waste means removing non-value-adding activities - anything that doesn't contribute to delivering value to the customer."
        },
        {
          question: "Which principle focuses on reducing cycle time to deliver value quickly?",
          answers: [
            "Build Quality In",
            "Deliver Fast",
            "Optimize the Whole",
            "Eliminate Waste"
          ],
          correct: 1,
          explanation: "The 'Deliver Fast' principle focuses on reducing cycle time by optimizing the value stream, eliminating delays, and delivering value to customers quickly."
        },
        {
          question: "What are the 5 core Lean Principles?",
          answers: [
            "Define Value, Map Value Stream, Create Flow, Establish Pull, Pursue Perfection",
            "Plan, Do, Check, Act, Improve",
            "Sprint, Review, Retrospect, Plan, Execute",
            "Develop, Test, Deploy, Monitor, Maintain"
          ],
          correct: 0,
          explanation: "The 5 Lean Principles are: Define Value, Map the Value Stream, Create Flow, Establish Pull, and Pursue Perfection. These guide continuous improvement."
        },
        {
          question: "What does 'Establish Pull' mean in Lean?",
          answers: [
            "Pull team members into meetings",
            "Work is pulled into production based on customer demand rather than pushed",
            "Pull reports from the system",
            "Pull requests in version control"
          ],
          correct: 1,
          explanation: "'Establish Pull' means work is pulled into the system based on actual customer demand, rather than being pushed based on forecasts. This reduces overproduction and inventory."
        },
        {
          question: "Which of the following is one of the 8 types of waste (DOWNTIME)?",
          answers: [
            "Documentation",
            "Defects",
            "Deployment",
            "Design"
          ],
          correct: 1,
          explanation: "Defects is one of the 8 types of waste in DOWNTIME: Defects, Overproduction, Waiting, Non-Utilized Talent, Transportation, Inventory, Motion, Extra Processing."
        }
      ],

      agileTools: [
        {
          question: "What is a User Story in Agile?",
          answers: [
            "A detailed technical specification",
            "A short description of a feature from the user's perspective",
            "A biography of the end user",
            "A project timeline"
          ],
          correct: 1,
          explanation: "A User Story is a short, simple description of a feature told from the perspective of the person who desires the capability, usually following the format: 'As a [role], I want [feature], so that [benefit].'"
        },
        {
          question: "What does INVEST stand for in writing good user stories?",
          answers: [
            "Independent, Negotiable, Valuable, Estimable, Small, Testable",
            "Innovative, New, Valuable, Effective, Simple, Trackable",
            "Important, Necessary, Valid, Efficient, Short, Timely",
            "Integrated, Notable, Verified, Expected, Synchronized, Tested"
          ],
          correct: 0,
          explanation: "INVEST is a mnemonic for criteria of good user stories: Independent, Negotiable, Valuable, Estimable, Small, and Testable."
        },
        {
          question: "What is a Burndown Chart used for?",
          answers: [
            "Tracking team member burnout",
            "Visualizing work remaining over time in a Sprint",
            "Recording team expenses",
            "Showing organizational hierarchy"
          ],
          correct: 1,
          explanation: "A Burndown Chart visualizes the amount of work remaining (usually in story points or hours) over time during a Sprint, helping teams track progress toward their Sprint Goal."
        },
        {
          question: "What is Continuous Integration (CI)?",
          answers: [
            "Integrating new team members continuously",
            "Frequently merging code changes into a shared repository with automated testing",
            "Continuous customer meetings",
            "Never-ending Sprints"
          ],
          correct: 1,
          explanation: "Continuous Integration is the practice of frequently merging code changes into a shared repository, with automated builds and tests running to catch integration issues early."
        }
      ],

      agileProjectManagement: [
        {
          question: "What is the purpose of a Sprint Goal?",
          answers: [
            "To set individual performance targets",
            "To provide an objective that can be met through implementing backlog items",
            "To determine team salaries",
            "To schedule meetings"
          ],
          correct: 1,
          explanation: "A Sprint Goal provides an objective that can be met through implementing product backlog items. It gives the Development Team guidance on why it's building the increment."
        },
        {
          question: "What is technical debt?",
          answers: [
            "Money owed to software vendors",
            "The implied cost of rework caused by choosing an easy solution now instead of a better approach",
            "Time spent in technical training",
            "Budget allocated for technology purchases"
          ],
          correct: 1,
          explanation: "Technical debt is the implied cost of additional rework caused by choosing an easy, quick solution now instead of using a better approach that would take longer initially."
        },
        {
          question: "What does 'potentially shippable' mean for an increment?",
          answers: [
            "It can be physically mailed to customers",
            "It meets the Definition of Done and could be released to production",
            "It's boxed and ready to ship",
            "It's been tested by shipping department"
          ],
          correct: 1,
          explanation: "'Potentially shippable' means the increment meets the Definition of Done and is in a usable condition. It could be released to production if the Product Owner decides to do so."
        },
        {
          question: "What is a Product Roadmap?",
          answers: [
            "A map of where products are stored",
            "A high-level visual summary showing the vision and direction of the product over time",
            "GPS coordinates of customer locations",
            "A list of all roads the product will be delivered on"
          ],
          correct: 1,
          explanation: "A Product Roadmap is a high-level visual summary that shows the vision and direction of the product offering over time. It helps communicate strategy and build consensus."
        },
        {
          question: "What is the purpose of a Definition of Ready?",
          answers: [
            "To define when developers are ready to work",
            "To establish criteria for when a user story is ready to be worked on",
            "To determine when customers are ready to buy",
            "To schedule when meetings are ready to start"
          ],
          correct: 1,
          explanation: "Definition of Ready establishes the criteria that must be met before a user story can be pulled into a Sprint. It ensures the team has everything needed to start work."
        },
        {
          question: "What is a spike in Agile development?",
          answers: [
            "A sudden increase in team velocity",
            "A time-boxed research or experiment to answer a question or gather information",
            "A sharp tool used by developers",
            "A type of defect in code"
          ],
          correct: 1,
          explanation: "A spike is a time-boxed period used to research a question or gather information, rather than produce shippable product. It helps reduce uncertainty."
        },
        {
          question: "What does MVP stand for in Agile?",
          answers: [
            "Most Valuable Player",
            "Minimum Viable Product",
            "Maximum Value Proposition",
            "Minimal Variation Process"
          ],
          correct: 1,
          explanation: "MVP stands for Minimum Viable Product - the version of a product with just enough features to satisfy early customers and provide feedback for future development."
        },
        {
          question: "What is pair programming?",
          answers: [
            "Two programmers working on separate tasks",
            "Two programmers working together at one workstation",
            "Programming in pairs of hours",
            "Pairing programmers with testers"
          ],
          correct: 1,
          explanation: "Pair programming is an Agile practice where two programmers work together at one workstation. One writes code while the other reviews each line, then they switch roles."
        }
      ],

      // NEW QUESTIONS - Adding 40 more for variety
      
      agileFundamentalsExtra: [
        {
          question: "Which Agile value emphasizes customer involvement throughout the project?",
          answers: [
            "Working software over comprehensive documentation",
            "Customer collaboration over contract negotiation",
            "Responding to change over following a plan",
            "Individuals and interactions over processes and tools"
          ],
          correct: 1,
          explanation: "Customer collaboration over contract negotiation emphasizes ongoing partnership with customers rather than rigid contractual relationships."
        },
        {
          question: "What is the main benefit of short iterations in Agile?",
          answers: [
            "Less work for the team",
            "Faster feedback and ability to adapt to change",
            "Fewer meetings required",
            "Lower project costs"
          ],
          correct: 1,
          explanation: "Short iterations provide faster feedback loops, allowing teams to adapt to change quickly and deliver value incrementally."
        },
        {
          question: "What does 'responding to change over following a plan' mean?",
          answers: [
            "Plans are not needed in Agile",
            "Agile teams should be flexible and adapt when circumstances change",
            "Teams should never make plans",
            "Changes should always be rejected"
          ],
          correct: 1,
          explanation: "This Agile value means teams should be flexible and willing to adapt their plans when they learn something new or circumstances change, rather than rigidly sticking to an outdated plan."
        },
        {
          question: "What is continuous delivery in Agile?",
          answers: [
            "Delivering packages every day",
            "Frequently releasing working software to users",
            "Never stopping work",
            "Working overtime continuously"
          ],
          correct: 1,
          explanation: "Continuous delivery is the practice of keeping software in a releasable state and deploying frequently, allowing teams to get feedback quickly and deliver value continuously."
        }
      ],

      scrumFrameworkExtra: [
        {
          question: "Can Sprint length change during a project?",
          answers: [
            "Yes, after any Sprint",
            "No, Sprint length is fixed for the entire project",
            "Only if the Product Owner approves",
            "Yes, but only during Sprint Planning"
          ],
          correct: 1,
          explanation: "Sprint length is typically kept consistent throughout a project to establish a predictable rhythm. Changing Sprint length disrupts velocity measurements and team predictability."
        },
        {
          question: "What happens if the Development Team cannot complete all Sprint Backlog items?",
          answers: [
            "The Sprint is cancelled",
            "Incomplete items return to the Product Backlog for reprioritization",
            "The team must work overtime",
            "The Scrum Master is fired"
          ],
          correct: 1,
          explanation: "Incomplete items are returned to the Product Backlog where the Product Owner can reprioritize them for future Sprints. There's no penalty for not completing everything."
        },
        {
          question: "Who is allowed to cancel a Sprint?",
          answers: [
            "The Scrum Master",
            "The Product Owner",
            "The Development Team",
            "Any stakeholder"
          ],
          correct: 1,
          explanation: "Only the Product Owner has the authority to cancel a Sprint, typically when the Sprint Goal becomes obsolete due to changing business conditions."
        },
        {
          question: "What is the Scrum framework primarily based on?",
          answers: [
            "Predictive planning",
            "Empiricism and lean thinking",
            "Command and control",
            "Comprehensive documentation"
          ],
          correct: 1,
          explanation: "Scrum is based on empiricism (knowledge from experience) and lean thinking (reducing waste). Teams make decisions based on observation and experimentation."
        }
      ],

      scrumRolesExtra: [
        {
          question: "How many Product Owners should a Scrum Team have?",
          answers: [
            "One per team member",
            "Exactly one",
            "At least two for backup",
            "As many as stakeholders want"
          ],
          correct: 1,
          explanation: "A Scrum Team has exactly one Product Owner. Having multiple Product Owners creates confusion about priorities and accountability."
        },
        {
          question: "Can the Scrum Master also be a Developer?",
          answers: [
            "No, never",
            "Yes, but it can be challenging to balance both roles",
            "Only in large teams",
            "Only if the Product Owner approves"
          ],
          correct: 1,
          explanation: "While possible, having the Scrum Master also serve as a Developer can be challenging as it may create conflicts between facilitating and doing development work."
        },
        {
          question: "What is the ideal size for a Scrum Development Team?",
          answers: [
            "3-9 people",
            "10 or fewer people",
            "Unlimited",
            "Exactly 7 people"
          ],
          correct: 1,
          explanation: "The Scrum Guide recommends 10 or fewer people on a Scrum Team (including Product Owner and Scrum Master). Smaller teams are more nimble and have less communication overhead."
        },
        {
          question: "Who creates the Sprint Backlog?",
          answers: [
            "The Product Owner",
            "The Development Team",
            "The Scrum Master",
            "Stakeholders"
          ],
          correct: 1,
          explanation: "The Development Team creates the Sprint Backlog by selecting items from the Product Backlog and planning how to deliver them during Sprint Planning."
        }
      ],

      scrumEventsExtra: [
        {
          question: "What is the maximum duration for a Sprint Retrospective in a one-month Sprint?",
          answers: [
            "1 hour",
            "3 hours",
            "4 hours",
            "No time limit"
          ],
          correct: 1,
          explanation: "The Sprint Retrospective is time-boxed to a maximum of 3 hours for a one-month Sprint. Shorter Sprints usually have shorter retrospectives."
        },
        {
          question: "Who facilitates the Daily Scrum?",
          answers: [
            "The Scrum Master",
            "The Development Team manages it themselves",
            "The Product Owner",
            "Different person each day"
          ],
          correct: 1,
          explanation: "The Development Team manages and runs the Daily Scrum themselves. The Scrum Master ensures it happens but doesn't have to facilitate it."
        },
        {
          question: "What is the main purpose of Sprint Planning?",
          answers: [
            "To assign tasks to team members",
            "To create a plan for delivering the Sprint Goal",
            "To review completed work",
            "To report status to management"
          ],
          correct: 1,
          explanation: "Sprint Planning creates a plan for how the team will deliver value during the Sprint by selecting Product Backlog items and defining how to complete them."
        },
        {
          question: "Can stakeholders attend the Daily Scrum?",
          answers: [
            "Yes, they must attend",
            "They can observe but not participate unless invited by the Development Team",
            "No, absolutely forbidden",
            "Only if they bring donuts"
          ],
          correct: 1,
          explanation: "Stakeholders may attend as observers if invited by the Development Team, but the Daily Scrum is primarily for the Development Team to synchronize their work."
        }
      ],

      scrumArtifactsExtra: [
        {
          question: "Who is accountable for the Product Backlog?",
          answers: [
            "The entire Scrum Team",
            "The Product Owner",
            "The Scrum Master",
            "The Development Team"
          ],
          correct: 1,
          explanation: "The Product Owner is accountable for the Product Backlog, including its content, availability, and ordering to maximize value."
        },
        {
          question: "What makes an Increment usable?",
          answers: [
            "It's been tested",
            "It meets the Definition of Done",
            "It's been demonstrated",
            "It's been documented"
          ],
          correct: 1,
          explanation: "An Increment must meet the Definition of Done to be considered usable. This ensures it meets quality standards and is potentially shippable."
        },
        {
          question: "How is the Product Backlog ordered?",
          answers: [
            "Alphabetically",
            "By value, risk, dependencies, and other factors determined by the Product Owner",
            "By team preference",
            "Randomly"
          ],
          correct: 1,
          explanation: "The Product Owner orders the Product Backlog based on value, risk, dependencies, learning opportunities, and other factors to maximize overall product value."
        },
        {
          question: "What is refinement in Scrum?",
          answers: [
            "Polishing completed work",
            "Adding detail, estimates, and order to Product Backlog items",
            "Making the team more efficient",
            "Cleaning up code"
          ],
          correct: 1,
          explanation: "Refinement is the act of adding detail, estimates, and order to Product Backlog items. Teams typically spend no more than 10% of Sprint capacity on refinement."
        }
      ],

      agileEstimationExtra: [
        {
          question: "What is the Fibonacci sequence commonly used for in Agile estimation?",
          answers: [
            "Calculating team salaries",
            "Story point values (1, 2, 3, 5, 8, 13, 21...)",
            "Sprint durations",
            "Team size"
          ],
          correct: 1,
          explanation: "The Fibonacci sequence is commonly used for story point values because the increasing gaps reflect greater uncertainty in larger estimates."
        },
        {
          question: "What does it mean if a team's velocity is decreasing?",
          answers: [
            "The team is lazy",
            "It could indicate technical debt, impediments, or other issues that should be investigated",
            "The project is failing",
            "The Scrum Master should be replaced"
          ],
          correct: 1,
          explanation: "Decreasing velocity is a signal to inspect and identify root causes, which could include technical debt, impediments, unclear requirements, or team issues."
        },
        {
          question: "Should velocity be compared across different teams?",
          answers: [
            "Yes, to rank teams",
            "No, each team's velocity is unique to that team",
            "Yes, to identify underperformers",
            "Yes, for budget planning"
          ],
          correct: 1,
          explanation: "Velocity should not be compared across teams because each team has its own estimation scale and context. Velocity is for planning within a single team."
        },
        {
          question: "What is T-shirt sizing in Agile estimation?",
          answers: [
            "Ordering team shirts",
            "Estimating using relative sizes like XS, S, M, L, XL",
            "Measuring team members",
            "Calculating clothing budgets"
          ],
          correct: 1,
          explanation: "T-shirt sizing is a high-level estimation technique using sizes (XS, S, M, L, XL) to quickly estimate relative complexity without detailed analysis."
        }
      ],

      leadershipAgileExtra: [
        {
          question: "What is a key characteristic of an Agile leader?",
          answers: [
            "Micromanaging the team",
            "Creating an environment where the team can thrive",
            "Making all decisions",
            "Assigning all tasks"
          ],
          correct: 1,
          explanation: "Agile leaders focus on creating an environment where teams can self-organize, make decisions, and continuously improve rather than directing every action."
        },
        {
          question: "How should an Agile leader handle conflict within the team?",
          answers: [
            "Ignore it and hope it resolves",
            "Facilitate resolution while empowering the team to find solutions",
            "Immediately fire someone",
            "Make all decisions for them"
          ],
          correct: 1,
          explanation: "Agile leaders facilitate conflict resolution while empowering the team to work through issues themselves, building stronger team dynamics and problem-solving skills."
        }
      ],

      kanbanExtra: [
        {
          question: "What does 'Stop Starting, Start Finishing' mean in Kanban?",
          answers: [
            "Never start new projects",
            "Focus on completing work in progress before starting new work",
            "Stop all work immediately",
            "Start everything at once"
          ],
          correct: 1,
          explanation: "'Stop Starting, Start Finishing' emphasizes completing work items before pulling in new work, reducing WIP and improving flow."
        },
        {
          question: "What is a cumulative flow diagram used for in Kanban?",
          answers: [
            "Tracking team attendance",
            "Visualizing work flow and identifying bottlenecks over time",
            "Planning vacations",
            "Measuring code quality"
          ],
          correct: 1,
          explanation: "A cumulative flow diagram shows how work moves through the system over time, making it easy to spot bottlenecks and flow issues."
        },
        {
          question: "What is the primary focus of Kanban?",
          answers: [
            "Following strict processes",
            "Optimizing flow and continuously improving",
            "Assigning blame for delays",
            "Maximizing utilization"
          ],
          correct: 1,
          explanation: "Kanban focuses on visualizing work, limiting WIP, and managing flow to continuously improve the system and deliver value efficiently."
        },
        {
          question: "How often should WIP limits be adjusted?",
          answers: [
            "Never",
            "When the team learns something that suggests limits should change",
            "Every day",
            "Only annually"
          ],
          correct: 1,
          explanation: "WIP limits should be adjusted based on empirical evidence and team learning. They're not fixed rules but tools for optimizing flow."
        }
      ],

      leanPrinciplesExtra: [
        {
          question: "What is the first step in implementing Lean?",
          answers: [
            "Eliminate all waste immediately",
            "Define value from the customer's perspective",
            "Fire half the team",
            "Buy new tools"
          ],
          correct: 1,
          explanation: "The first Lean principle is to define value from the customer's perspective - understanding what the customer is willing to pay for."
        },
        {
          question: "What does 'Map the Value Stream' help identify?",
          answers: [
            "Where team members sit",
            "All steps in the process and which add value vs. waste",
            "Customer locations",
            "Budget allocations"
          ],
          correct: 1,
          explanation: "'Map the Value Stream' means documenting all process steps and identifying which add value for the customer and which are waste."
        },
        {
          question: "Which is NOT one of the 8 types of waste in DOWNTIME?",
          answers: [
            "Defects",
            "Documentation",
            "Overproduction",
            "Transportation"
          ],
          correct: 1,
          explanation: "Documentation is not one of the 8 wastes. DOWNTIME stands for: Defects, Overproduction, Waiting, Non-Utilized Talent, Transportation, Inventory, Motion, Extra Processing."
        },
        {
          question: "What does 'Pursue Perfection' mean in Lean?",
          answers: [
            "Never release anything with any flaws",
            "Continuously improve toward an ideal state",
            "Fire anyone who makes mistakes",
            "Spend unlimited time on quality"
          ],
          correct: 1,
          explanation: "'Pursue Perfection' means continuously improving processes and reducing waste, always striving toward an ideal state while delivering value."
        }
      ],

      agileToolsExtra: [
        {
          question: "What is refactoring in Agile development?",
          answers: [
            "Removing team members",
            "Restructuring existing code without changing its external behavior",
            "Starting over from scratch",
            "Calculating factors again"
          ],
          correct: 1,
          explanation: "Refactoring is improving the internal structure of code without changing its external behavior, making it cleaner and more maintainable."
        },
        {
          question: "What is Test-Driven Development (TDD)?",
          answers: [
            "Testing after coding is complete",
            "Writing tests before writing the code that makes them pass",
            "Having testers drive the car",
            "Testing only in production"
          ],
          correct: 1,
          explanation: "TDD is a practice where developers write automated tests before writing the production code, then write just enough code to pass the test."
        },
        {
          question: "What does the 'I' in INVEST stand for?",
          answers: [
            "Intelligent",
            "Independent",
            "Interesting",
            "Immediate"
          ],
          correct: 1,
          explanation: "The 'I' in INVEST stands for Independent - user stories should be independent of each other to allow flexible prioritization and implementation."
        },
        {
          question: "What is a Burnup Chart?",
          answers: [
            "A chart showing team exhaustion",
            "A chart showing work completed over time toward a goal",
            "A chart of burned code",
            "Temperature monitoring"
          ],
          correct: 1,
          explanation: "A Burnup Chart shows the accumulation of completed work over time, making it easy to track progress toward a goal and see scope changes."
        }
      ]
    };

    // State management
    let examState = {
      version: null,
      questionCount: null,
      timeLimit: null,
      currentQuestionIndex: 0,
      questions: [],
      userAnswers: [],
      score: 0,
      answered: [],
      timerInterval: null,
      timeRemaining: 0
    };

    // Setup screen handlers
    const versionSelect = document.getElementById('versionSelect');
    const questionsSelect = document.getElementById('questionsSelect');

    versionSelect.addEventListener('change', function() {
      examState.version = this.value;
      checkStartButton();
    });

    questionsSelect.addEventListener('change', function() {
      if (this.value) {
        examState.questionCount = parseInt(this.value);
        const selectedOption = this.options[this.selectedIndex];
        examState.timeLimit = parseInt(selectedOption.dataset.time);
        checkStartButton();
      }
    });

    function checkStartButton() {
      const startBtn = document.getElementById('startExamBtn');
      if (examState.version && examState.questionCount) {
        startBtn.disabled = false;
      }
    }

    document.getElementById('startExamBtn').addEventListener('click', startExam);

    // Home button event listener - NO CONFIRMATION, INSTANT ACTION
    window.addEventListener('load', function() {
      console.log('Page loaded, setting up home button');
      const homeBtn = document.getElementById('homeBtn');
      console.log('Home button found:', homeBtn);
      
      if (homeBtn) {
        homeBtn.onclick = function() {
          console.log('Home button clicked - going home NOW!');
          try {
            stopTimer();
          } catch(e) {
            console.log('Timer stop failed, continuing anyway');
          }
          // Simply hide exam screen and show setup screen
          console.log('Hiding exam, showing setup');
          document.getElementById('examScreen').style.display = 'none';
          document.getElementById('setupScreen').style.display = 'block';
          // Reset dropdowns
          document.getElementById('versionSelect').value = '';
          document.getElementById('questionsSelect').value = '';
          document.getElementById('startExamBtn').disabled = true;
          console.log('Home action complete!');
          return false;
        };
        console.log('Home button onclick attached');
      } else {
        console.error('Home button NOT found!');
      }
    });

    function startExam() {
      // Generate question set based on version and count
      generateQuestions();
      
      // Initialize state
      examState.currentQuestionIndex = 0;
      examState.userAnswers = new Array(examState.questions.length).fill(null);
      examState.answered = new Array(examState.questions.length).fill(false);
      examState.score = 0;
      examState.timeRemaining = examState.timeLimit * 60; // Convert minutes to seconds

      // Update UI
      document.getElementById('currentVersion').textContent = examState.version;
      document.getElementById('setupScreen').style.display = 'none';
      document.getElementById('examScreen').style.display = 'block';

      // Start timer
      startTimer();

      // Show first question
      showQuestion(0);
    }

    function startTimer() {
      updateTimerDisplay();
      
      examState.timerInterval = setInterval(() => {
        examState.timeRemaining--;
        updateTimerDisplay();

        // Warning when 5 minutes left
        if (examState.timeRemaining === 300) {
          alert('‚ö†Ô∏è 5 minutes remaining!');
        }

        // Warning when 1 minute left
        if (examState.timeRemaining === 60) {
          document.getElementById('timerDisplay').classList.add('timer-warning');
          alert('‚ö†Ô∏è 1 minute remaining!');
        }

        // Time's up
        if (examState.timeRemaining <= 0) {
          clearInterval(examState.timerInterval);
          alert('‚è∞ Time\'s up! Submitting your exam...');
          autoSubmitExam();
        }
      }, 1000);
    }

    function updateTimerDisplay() {
      const minutes = Math.floor(examState.timeRemaining / 60);
      const seconds = examState.timeRemaining % 60;
      const display = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      document.getElementById('timerDisplay').textContent = display;

      // Add warning class when less than 5 minutes
      if (examState.timeRemaining < 300) {
        document.querySelector('.timer-item').style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
      }
      if (examState.timeRemaining < 60) {
        document.querySelector('.timer-item').style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
      }
    }

    function stopTimer() {
      if (examState.timerInterval) {
        clearInterval(examState.timerInterval);
      }
    }

    function autoSubmitExam() {
      // Auto-submit any unanswered questions
      examState.questions.forEach((question, index) => {
        if (!examState.answered[index] && examState.userAnswers[index] !== null) {
          examState.answered[index] = true;
          if (examState.userAnswers[index] === question.correct) {
            examState.score++;
          }
        }
      });
      showResults();
    }

    function generateQuestions() {
      // Collect all questions from all topics
      const allQuestions = [];
      Object.keys(questionBank).forEach(topic => {
        allQuestions.push(...questionBank[topic]);
      });

      // Use timestamp + version for unique randomization each time
      // This means same version will give different questions on each attempt
      const seed = parseInt(examState.version) * 1000 + Date.now();
      console.log('Generating questions with seed:', seed);
      shuffleArray(allQuestions, seed);

      // Select the requested number of questions
      const selectedQuestions = allQuestions.slice(0, examState.questionCount);
      
      // Randomize answer positions for each question
      examState.questions = selectedQuestions.map((question, index) => {
        // Create array of answer objects with their original index
        const answersWithIndex = question.answers.map((answer, idx) => ({
          text: answer,
          originalIndex: idx
        }));
        
        // Shuffle answers using question index + timestamp as additional seed
        const answerSeed = seed + index * 100;
        shuffleArrayWithSeed(answersWithIndex, answerSeed);
        
        // Find new position of correct answer
        const newCorrectIndex = answersWithIndex.findIndex(
          item => item.originalIndex === question.correct
        );
        
        // Return question with shuffled answers
        return {
          question: question.question,
          answers: answersWithIndex.map(item => item.text),
          correct: newCorrectIndex,
          explanation: question.explanation
        };
      });
      
      console.log(`Generated ${examState.questions.length} questions`);
    }
    
    function shuffleArrayWithSeed(array, seed) {
      let currentIndex = array.length;
      
      const random = (function(s) {
        let x = Math.sin(s++) * 10000;
        return function() {
          x = Math.sin(s++) * 10000;
          return x - Math.floor(x);
        };
      })(seed);

      while (0 !== currentIndex) {
        const randomIndex = Math.floor(random() * currentIndex);
        currentIndex -= 1;
        const temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }
    }

    function shuffleArray(array, seed) {
      // Seeded shuffle for consistent versions
      let currentIndex = array.length;
      let temporaryValue, randomIndex;
      
      // Use seed to make shuffle deterministic for each version
      const random = (function(seed) {
        let x = Math.sin(seed++) * 10000;
        return function() {
          x = Math.sin(seed++) * 10000;
          return x - Math.floor(x);
        };
      })(seed);

      while (0 !== currentIndex) {
        randomIndex = Math.floor(random() * currentIndex);
        currentIndex -= 1;
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }
    }

    function showQuestion(index) {
      examState.currentQuestionIndex = index;
      const question = examState.questions[index];

      // Update header
      document.getElementById('questionNumber').textContent = `Question ${index + 1} of ${examState.questions.length}`;
      document.getElementById('progressCounter').textContent = `${index + 1}/${examState.questions.length}`;
      document.getElementById('currentScore').textContent = examState.score;

      // Update question
      document.getElementById('questionText').textContent = question.question;

      // Create answer options
      const answersList = document.getElementById('answersList');
      answersList.innerHTML = '';
      
      question.answers.forEach((answer, i) => {
        const answerDiv = document.createElement('div');
        answerDiv.className = 'answer-option';
        if (examState.userAnswers[index] === i) {
          answerDiv.classList.add('selected');
        }
        if (examState.answered[index]) {
          answerDiv.classList.add('disabled');
          if (i === question.correct) {
            answerDiv.classList.add('correct');
          } else if (examState.userAnswers[index] === i) {
            answerDiv.classList.add('incorrect');
          }
        }
        
        answerDiv.innerHTML = `
          <div class="answer-letter">${String.fromCharCode(65 + i)}</div>
          <div class="answer-text">${answer}</div>
        `;
        
        if (!examState.answered[index]) {
          answerDiv.addEventListener('click', () => selectAnswer(i));
        }
        
        answersList.appendChild(answerDiv);
      });

      // Show/hide feedback
      const feedbackBox = document.getElementById('feedbackBox');
      if (examState.answered[index]) {
        showFeedback(index);
      } else {
        feedbackBox.classList.remove('show');
      }

      // Update buttons
      updateNavigationButtons();
    }

    function selectAnswer(answerIndex) {
      examState.userAnswers[examState.currentQuestionIndex] = answerIndex;
      
      // Update UI to show selection
      document.querySelectorAll('.answer-option').forEach((opt, i) => {
        opt.classList.toggle('selected', i === answerIndex);
      });

      // Enable submit button
      document.getElementById('submitBtn').style.display = 'inline-block';
      document.getElementById('nextBtn').style.display = 'none';
    }

    document.getElementById('submitBtn').addEventListener('click', submitAnswer);

    function submitAnswer() {
      const index = examState.currentQuestionIndex;
      const question = examState.questions[index];
      const userAnswer = examState.userAnswers[index];

      // Mark as answered
      examState.answered[index] = true;

      // Check if correct
      const isCorrect = userAnswer === question.correct;
      if (isCorrect) {
        examState.score++;
      }

      // Update answer options
      document.querySelectorAll('.answer-option').forEach((opt, i) => {
        opt.classList.add('disabled');
        if (i === question.correct) {
          opt.classList.add('correct');
        } else if (i === userAnswer) {
          opt.classList.add('incorrect');
        }
      });

      // Show feedback
      showFeedback(index);

      // Update buttons
      document.getElementById('submitBtn').style.display = 'none';
      document.getElementById('nextBtn').style.display = 'inline-block';
      document.getElementById('currentScore').textContent = examState.score;
    }

    function showFeedback(index) {
      const question = examState.questions[index];
      const userAnswer = examState.userAnswers[index];
      const isCorrect = userAnswer === question.correct;

      const feedbackBox = document.getElementById('feedbackBox');
      const feedbackText = document.getElementById('feedbackText');

      feedbackBox.className = 'feedback-box show';
      feedbackBox.classList.add(isCorrect ? 'correct' : 'incorrect');

      const icon = isCorrect ? '‚úì' : '‚úó';
      const header = isCorrect ? 'Correct!' : 'Incorrect';
      
      feedbackBox.querySelector('.feedback-icon').textContent = icon;
      feedbackBox.querySelector('.feedback-header span:last-child').textContent = header;

      let feedbackHTML = '';
      if (!isCorrect) {
        feedbackHTML += `<strong>Your answer:</strong> ${question.answers[userAnswer]}<br><br>`;
        feedbackHTML += `<strong>Correct answer:</strong> ${question.answers[question.correct]}<br><br>`;
      }
      feedbackHTML += `<strong>Explanation:</strong> ${question.explanation}`;
      
      feedbackText.innerHTML = feedbackHTML;
    }

    function updateNavigationButtons() {
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const finishBtn = document.getElementById('finishBtn');
      const submitBtn = document.getElementById('submitBtn');

      prevBtn.disabled = examState.currentQuestionIndex === 0;

      if (examState.currentQuestionIndex === examState.questions.length - 1) {
        nextBtn.style.display = 'none';
        if (examState.answered[examState.currentQuestionIndex]) {
          finishBtn.style.display = 'inline-block';
          submitBtn.style.display = 'none';
        }
      } else {
        nextBtn.style.display = examState.answered[examState.currentQuestionIndex] ? 'inline-block' : 'none';
        finishBtn.style.display = 'none';
      }
    }

    document.getElementById('prevBtn').addEventListener('click', () => {
      if (examState.currentQuestionIndex > 0) {
        showQuestion(examState.currentQuestionIndex - 1);
      }
    });

    document.getElementById('nextBtn').addEventListener('click', () => {
      if (examState.currentQuestionIndex < examState.questions.length - 1) {
        showQuestion(examState.currentQuestionIndex + 1);
      }
    });

    // Finish button setup - use direct onclick for maximum compatibility
    window.addEventListener('load', function() {
      setTimeout(function() {
        const finishBtn = document.getElementById('finishBtn');
        if (finishBtn) {
          console.log('Finish button found, attaching onclick');
          finishBtn.onclick = function() {
            console.log('Finish button clicked - showing results NOW!');
            showResults();
            return false;
          };
        }
      }, 1000);
    });

    function showResults() {
      console.log('showResults called!');
      // Stop timer
      stopTimer();

      // Calculate results
      const totalQuestions = examState.questions.length;
      const correct = examState.score;
      const incorrect = totalQuestions - correct;
      const percentage = Math.round((correct / totalQuestions) * 100);

      // Calculate time taken
      const timeTaken = (examState.timeLimit * 60) - examState.timeRemaining;
      const minutesTaken = Math.floor(timeTaken / 60);
      const secondsTaken = timeTaken % 60;
      const timeDisplay = `${minutesTaken}:${String(secondsTaken).padStart(2, '0')}`;

      // Determine message
      let message = '';
      if (percentage === 100) {
        message = 'üèÜ Perfect Score! Outstanding!';
      } else if (percentage >= 90) {
        message = 'üåü Excellent Work!';
      } else if (percentage >= 80) {
        message = '‚ú® Great Job!';
      } else if (percentage >= 70) {
        message = 'üëç Good Effort!';
      } else if (percentage >= 60) {
        message = 'üìö Keep Studying!';
      } else {
        message = 'üí™ Review and Try Again!';
      }
      
      console.log(`Results: ${correct}/${totalQuestions} = ${percentage}%`);

      // Build results HTML - similar structure to question card
      let resultsHTML = `
        <div style="text-align: center; margin-bottom: 30px;">
          <div style="font-size: 4rem; color: #2d87a8; font-weight: 700; margin-bottom: 15px;">${percentage}%</div>
          <div style="font-size: 1.8rem; color: #3d4f5c; font-weight: 700; margin-bottom: 10px;">${message}</div>
          <div style="font-size: 1.1rem; color: #5a7070;">You answered ${correct} out of ${totalQuestions} questions correctly</div>
          <div style="font-size: 1rem; color: #5a7070; margin-top: 10px;">Time: ${timeDisplay}</div>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px;">
          <div style="background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f2 100%); padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #2d87a8;">
            <div style="font-size: 2rem; color: #2d87a8; font-weight: 700;">${correct}</div>
            <div style="font-size: 0.85rem; color: #5a7070; font-weight: 600;">Correct</div>
          </div>
          <div style="background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f2 100%); padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #2d87a8;">
            <div style="font-size: 2rem; color: #2d87a8; font-weight: 700;">${incorrect}</div>
            <div style="font-size: 0.85rem; color: #5a7070; font-weight: 600;">Incorrect</div>
          </div>
          <div style="background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f2 100%); padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #2d87a8;">
            <div style="font-size: 2rem; color: #2d87a8; font-weight: 700;">${percentage}%</div>
            <div style="font-size: 0.85rem; color: #5a7070; font-weight: 600;">Score</div>
          </div>
        </div>

        <h3 style="font-size: 1.4rem; color: #3d4f5c; font-weight: 700; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 3px solid #2d87a8;">
          üìù All Questions & Answers
        </h3>
        
        <div style="max-height: 400px; overflow-y: auto; margin-bottom: 20px;">
      `;

      // Add all questions
      examState.questions.forEach((question, index) => {
        const userAnswer = examState.userAnswers[index];
        const isCorrect = userAnswer !== null && userAnswer === question.correct;
        const wasAnswered = userAnswer !== null;
        
        const borderColor = isCorrect ? '#10b981' : '#ef4444';
        const bgColor = isCorrect ? '#f0fdf4' : '#fef2f2';

        resultsHTML += `
          <div style="background: ${bgColor}; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid ${borderColor};">
            <div style="font-size: 0.95rem; font-weight: 600; margin-bottom: 10px; color: #2d3d3d;">
              <strong>Q${index + 1}:</strong> ${question.question}
            </div>
            <div style="font-size: 0.9rem; margin: 8px 0;">
              <div style="color: #2d3d3d; font-weight: 600;">
                ${isCorrect ? '‚úì' : '‚úó'} Your answer: ${wasAnswered ? question.answers[userAnswer] : 'Not answered'}
              </div>`;
        
        if (!isCorrect) {
          resultsHTML += `
              <div style="color: #10b981; font-weight: 600; margin-top: 5px;">
                ‚úì Correct: ${question.answers[question.correct]}
              </div>`;
        }
        
        resultsHTML += `
            </div>
            <div style="margin-top: 10px; padding: 10px; background: white; border-radius: 6px; font-size: 0.85rem; line-height: 1.5;">
              <strong>Explanation:</strong> ${question.explanation}
            </div>
          </div>
        `;
      });

      resultsHTML += `
        </div>
        
        <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
          <button onclick="goBackHome(); return false;" style="padding: 15px 40px; background: linear-gradient(135deg, #2d87a8 0%, #3d9ec4 100%); color: white; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(45,135,168,0.3);">
            üè† Return to Home - Take Another Exam
          </button>
        </div>
      `;

      // Replace ONLY the question card content (like showing a new question)
      console.log('Replacing question card with results');
      const questionCard = document.querySelector('.question-card');
      if (questionCard) {
        questionCard.innerHTML = resultsHTML;
        console.log('Results displayed in question card!');
      } else {
        console.error('Question card not found!');
      }
      
      // Scroll to top
      window.scrollTo(0, 0);
    }
    
    // Make showResults available globally for inline onclick
    window.showResults = showResults;
    
    function goBackHome() {
      // Reset and go back to setup
      stopTimer();
      document.getElementById('examScreen').style.display = 'none';
      document.getElementById('setupScreen').style.display = 'block';
      document.getElementById('versionSelect').value = '';
      document.getElementById('questionsSelect').value = '';
      document.getElementById('startExamBtn').disabled = true;
      window.scrollTo(0, 0);
    }
    
    // Make function available globally for onclick
    window.goBackHome = goBackHome;

  </script>
</body>
</html>
