<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: transparent;
  margin: 0;
  padding: 0;
  user-select: none;
}

.game-container {
  max-width: 1000px;
  margin: 60px auto;
  padding: 0 40px;
}

.game-header {
  text-align: center;
  margin-bottom: 40px;
}

.game-title {
  font-size: 2.5rem;
  color: #0f6868;
  font-weight: 700;
  margin-bottom: 15px;
}

.game-subtitle {
  font-size: 1.1rem;
  color: #0f6868;
  line-height: 1.6;
  margin-bottom: 20px;
}

.game-instructions {
  background: rgba(26, 138, 138, 0.1);
  padding: 20px;
  border-radius: 12px;
  text-align: center;
  color: #0f6868;
  font-weight: 600;
  margin-bottom: 30px;
  border: 2px solid rgba(26, 138, 138, 0.3);
}

/* Game Screen */
.game-screen {
  display: block;
}

.stats-bar {
  display: flex;
  justify-content: space-between;
  background: white;
  padding: 20px 30px;
  border-radius: 16px;
  margin-bottom: 30px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.stat-item {
  text-align: center;
}

.stat-label {
  font-size: 0.85rem;
  color: #5a7070;
  font-weight: 600;
  margin-bottom: 5px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stat-value {
  font-size: 1.5rem;
  color: #1a8a8a;
  font-weight: 700;
}

.stat-value.good {
  color: #10b981;
}

.stat-value.warning {
  color: #f59e0b;
}

.stat-value.danger {
  color: #ef4444;
}

.scenario-card {
  background: white;
  padding: 40px;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  margin-bottom: 30px;
  animation: slideIn 0.5s ease;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.scenario-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 25px;
  padding-bottom: 20px;
  border-bottom: 3px solid #2dd4bf;
}

.scenario-icon {
  font-size: 3rem;
}

.scenario-info {
  flex: 1;
}

.scenario-number {
  font-size: 0.85rem;
  color: #1a8a8a;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 5px;
}

.scenario-title {
  font-size: 1.5rem;
  color: #0f6868;
  font-weight: 700;
}

.scenario-text {
  font-size: 1.15rem;
  color: #2d3d3d;
  line-height: 1.8;
  margin-bottom: 30px;
}

.choices {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.choice-btn {
  background: white;
  padding: 20px 25px;
  border: 3px solid #e0e0e0;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: left;
  font-size: 1.05rem;
  color: #2d3d3d;
  font-weight: 600;
  position: relative;
}

.choice-text {
  margin-bottom: 12px;
}

.choice-consequences {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  font-size: 0.85rem;
  font-weight: 600;
  margin-top: 10px;
}

.consequence-tag {
  padding: 4px 10px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  gap: 4px;
}

.consequence-tag.cost {
  background: #fee2e2;
  color: #991b1b;
}

.consequence-tag.time {
  background: #fef3c7;
  color: #92400e;
}

.consequence-tag.quality {
  background: #dbeafe;
  color: #1e40af;
}

.consequence-tag.trust {
  background: #e0e7ff;
  color: #4338ca;
}

.choice-btn:hover {
  border-color: #1a8a8a;
  transform: translateX(10px);
  box-shadow: 0 4px 15px rgba(26, 138, 138, 0.2);
}

.choice-btn::before {
  content: '‚Üí';
  position: absolute;
  right: 25px;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0;
  transition: opacity 0.3s ease;
  color: #1a8a8a;
  font-size: 1.5rem;
}

.choice-btn:hover::before {
  opacity: 1;
}

/* Outcome Screen */
.outcome-screen {
  background: white;
  padding: 40px;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  text-align: center;
  display: none;
  animation: popIn 0.5s ease;
}

.outcome-screen.show {
  display: block;
}

@keyframes popIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.outcome-icon {
  font-size: 5rem;
  margin-bottom: 20px;
}

.outcome-title {
  font-size: 2rem;
  color: #0f6868;
  font-weight: 700;
  margin-bottom: 20px;
}

.outcome-text {
  font-size: 1.15rem;
  color: #2d3d3d;
  line-height: 1.8;
  margin-bottom: 25px;
}

.impact-changes {
  display: flex;
  justify-content: center;
  gap: 30px;
  margin-bottom: 30px;
  flex-wrap: wrap;
}

.impact-item {
  padding: 15px 25px;
  border-radius: 10px;
  font-weight: 700;
  font-size: 1.1rem;
}

.impact-item.positive {
  background: #d1fae5;
  color: #065f46;
}

.impact-item.negative {
  background: #fee2e2;
  color: #991b1b;
}

.impact-item.neutral {
  background: #e0f2fe;
  color: #075985;
}

.continue-btn {
  background: linear-gradient(135deg, #1a8a8a, #2dd4bf);
  color: white;
  padding: 15px 40px;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.continue-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(26, 138, 138, 0.3);
}

/* Final Results */
.final-results {
  background: white;
  padding: 50px;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  text-align: center;
  display: none;
}

.final-results.show {
  display: block;
}

.final-icon {
  font-size: 6rem;
  margin-bottom: 20px;
}

.final-title {
  font-size: 2.5rem;
  color: #0f6868;
  font-weight: 700;
  margin-bottom: 20px;
}

.final-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  margin-bottom: 30px;
}

.final-stat {
  background: linear-gradient(135deg, rgba(26, 138, 138, 0.1), rgba(45, 212, 191, 0.1));
  padding: 20px;
  border-radius: 12px;
}

.final-stat-label {
  font-size: 0.9rem;
  color: #5a7070;
  font-weight: 600;
  margin-bottom: 8px;
}

.final-stat-value {
  font-size: 2rem;
  color: #1a8a8a;
  font-weight: 700;
}

.final-message {
  font-size: 1.2rem;
  color: #2d3d3d;
  line-height: 1.8;
  margin-bottom: 30px;
}

.restart-btn {
  background: linear-gradient(135deg, #1a8a8a, #2dd4bf);
  color: white;
  padding: 15px 40px;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.restart-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(26, 138, 138, 0.3);
}

@media (max-width: 768px) {
  .game-container {
    padding: 0 20px;
    margin: 40px auto;
  }
  
  .game-title {
    font-size: 2rem;
  }
  
  .stats-bar {
    flex-wrap: wrap;
    gap: 15px;
  }
  
  .impact-changes {
    flex-direction: column;
    gap: 15px;
  }
  
  .final-stats {
    grid-template-columns: repeat(2, 1fr);
  }
}
</style>
</head>
<body>
<div class="game-container">
  <div class="game-header">
    <h2 class="game-title">üìä Agile Project Manager Challenge</h2>
    <p class="game-subtitle">Navigate complex project management scenarios and make strategic decisions!</p>
  </div>
  
  <div class="game-instructions">
    üéØ Manage a $100K project across 6 challenging scenarios. Budget covers: hiring contractors, tools, training, overtime, emergency fixes. Run out of money and your project fails!
  </div>
  
  <!-- Game Screen -->
  <div class="game-screen" id="game-screen">
    <div class="stats-bar">
      <div class="stat-item">
        <div class="stat-label">Budget</div>
        <div class="stat-value" id="budget">$100K</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Timeline</div>
        <div class="stat-value" id="timeline">On Track</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Quality</div>
        <div class="stat-value" id="quality">100%</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Stakeholder Trust</div>
        <div class="stat-value" id="trust">100%</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Scenario</div>
        <div class="stat-value" id="scenario-count">1/6</div>
      </div>
    </div>
    
    <div class="scenario-card" id="scenario-card"></div>
  </div>
  
  <!-- Outcome Screen -->
  <div class="outcome-screen" id="outcome-screen">
    <div class="outcome-icon" id="outcome-icon"></div>
    <div class="outcome-title" id="outcome-title"></div>
    <div class="outcome-text" id="outcome-text"></div>
    <div class="impact-changes" id="impact-changes"></div>
    <button class="continue-btn" onclick="nextScenario()">Continue</button>
  </div>
  
  <!-- Final Results -->
  <div class="final-results" id="final-results">
    <div class="final-icon" id="final-icon"></div>
    <div class="final-title">Project Complete!</div>
    <div class="final-stats">
      <div class="final-stat">
        <div class="final-stat-label">Final Budget</div>
        <div class="final-stat-value" id="final-budget"></div>
      </div>
      <div class="final-stat">
        <div class="final-stat-label">Timeline Status</div>
        <div class="final-stat-value" id="final-timeline"></div>
      </div>
      <div class="final-stat">
        <div class="final-stat-label">Quality Score</div>
        <div class="final-stat-value" id="final-quality"></div>
      </div>
      <div class="final-stat">
        <div class="final-stat-label">Trust Level</div>
        <div class="final-stat-value" id="final-trust"></div>
      </div>
    </div>
    <div class="final-message" id="final-message"></div>
    <button class="restart-btn" onclick="location.reload()">Play Again</button>
  </div>
</div>

<script>
let currentScenario = 0;
let stats = {
  budget: 100,
  timeline: 0, // 0 = on track, negative = delayed, positive = ahead
  quality: 100,
  trust: 100
};

const scenarios = [
  {
    icon: 'üìÖ',
    title: 'Release Planning Conflict',
    text: 'You\'re planning a major release. Marketing wants maximum features for a trade show in 8 weeks. Engineering says they need 12 weeks to deliver quality work. The CEO is pushing for the 8-week timeline. Your project budget is $100K.',
    choices: [
      {
        text: 'Commit to 8 weeks with all features to satisfy marketing',
        consequences: { cost: 20, time: 0, quality: -30, trust: -25 },
        outcome: {
          icon: 'üò∞',
          title: 'Overpromised and Underdelivered',
          text: 'Team worked 60-hour weeks (overtime cost: $20K). Delivered a buggy product at the trade show. Customer demos failed. Team morale collapsed.',
          impact: { budget: -20, timeline: 0, quality: -30, trust: -25 }
        }
      },
      {
        text: 'Negotiate an MVP for 8 weeks, full release in 12 weeks',
        consequences: { cost: 0, time: 0, quality: 10, trust: 15 },
        outcome: {
          icon: 'üéØ',
          title: 'Strategic Compromise',
          text: 'Trade show demo went well with core features. Full release delivered on time with quality. Stakeholders impressed by realism.',
          impact: { budget: 0, timeline: 0, quality: 10, trust: 15 }
        }
      },
      {
        text: 'Stand firm on 12 weeks for quality delivery',
        consequences: { cost: 0, time: -1, quality: 15, trust: 5 },
        outcome: {
          icon: '‚öñÔ∏è',
          title: 'Quality Over Speed',
          text: 'Missed the trade show but delivered excellent product. Lost short-term opportunity but built long-term credibility.',
          impact: { budget: 0, timeline: -1, quality: 15, trust: 5 }
        }
      }
    ]
  },
  {
    icon: '‚ö†Ô∏è',
    title: 'Critical Risk Identified',
    text: 'Your team discovered a critical dependency: a third-party API you\'re building on will be deprecated in 3 months. Migration will cost $30K and 4 weeks. Your remaining budget is $' + (stats.budget) + 'K. Do you have the funds?',
    choices: [
      {
        text: 'Ignore it and hope the API deprecation gets delayed',
        consequences: { cost: 50, time: -3, quality: -20, trust: -30 },
        outcome: {
          icon: 'üí•',
          title: 'Catastrophic Failure',
          text: 'API shut down as scheduled. Emergency fixes cost $50K (consultants, overtime). Spent 8 weeks recovering. Project nearly cancelled.',
          impact: { budget: -50, timeline: -3, quality: -20, trust: -30 }
        }
      },
      {
        text: 'Request additional budget ($30K) and adjust timeline (+4 weeks)',
        consequences: { cost: 30, time: -1, quality: 10, trust: 20 },
        outcome: {
          icon: 'üìä',
          title: 'Proactive Risk Management',
          text: 'Leadership approved $30K after seeing your risk analysis. Migration completed smoothly with quality improvements. Trust increased.',
          impact: { budget: -30, timeline: -1, quality: 10, trust: 20 }
        }
      },
      {
        text: 'Reduce scope to absorb migration within current constraints',
        consequences: { cost: 0, time: 0, quality: 5, trust: 10 },
        outcome: {
          icon: 'üîÑ',
          title: 'Scope Adjustment',
          text: 'Prioritized critical features, deferred nice-to-haves. Team handled migration during normal work. Delivered core value on time and budget.',
          impact: { budget: 0, timeline: 0, quality: 5, trust: 10 }
        }
      }
    ]
  },
  {
    icon: 'üë•',
    title: 'Multi-Team Coordination Crisis',
    text: 'You\'re managing 3 Agile teams working on interconnected features. Teams are blocking each other, dependencies are unclear, and integration testing is failing. Delivery is at risk. Budget remaining: $' + (stats.budget) + 'K.',
    choices: [
      {
        text: 'Let teams figure it out themselves - they\'re self-organizing',
        consequences: { cost: 15, time: -2, quality: -25, trust: -20 },
        outcome: {
          icon: 'üå™Ô∏è',
          title: 'Chaos Ensues',
          text: 'Teams pulled in different directions. Integration broke completely. Had to hire consultants ($15K) to restart integration from scratch.',
          impact: { budget: -15, timeline: -2, quality: -25, trust: -20 }
        }
      },
      {
        text: 'Establish a Scrum of Scrums with clear integration cadence',
        consequences: { cost: 0, time: 1, quality: 20, trust: 15 },
        outcome: {
          icon: 'ü§ù',
          title: 'Coordination Restored',
          text: 'Daily sync meetings resolved blockers quickly. Created shared definition of done. Teams aligned and velocity improved. Finished ahead of schedule.',
          impact: { budget: 0, timeline: 1, quality: 20, trust: 15 }
        }
      },
      {
        text: 'Hire Agile coach ($10K) to reorganize into feature teams',
        consequences: { cost: 10, time: -1, quality: 15, trust: 10 },
        outcome: {
          icon: 'üîß',
          title: 'Structural Solution',
          text: 'Coach helped reorganize teams. Took 2 weeks but eliminated most cross-team dependencies. Long-term improvement worth the investment.',
          impact: { budget: -10, timeline: -1, quality: 15, trust: 10 }
        }
      }
    ]
  },
  {
    icon: 'üìà',
    title: 'Velocity vs Predictability Dilemma',
    text: 'Your team\'s velocity varies wildly: 30, 15, 40, 18, 35 points over the last 5 sprints. Stakeholders are frustrated by unpredictability. They want consistent delivery. Budget: $' + (stats.budget) + 'K.',
    choices: [
      {
        text: 'Push team to maintain high velocity (35+) every sprint',
        consequences: { cost: 20, time: -2, quality: -30, trust: -25 },
        outcome: {
          icon: 'üòì',
          title: 'Burnout and Quality Drop',
          text: 'Team worked unsustainably. Technical debt exploded. Several developers quit (recruiting cost: $20K). Velocity collapsed to 10. Project delayed.',
          impact: { budget: -20, timeline: -2, quality: -30, trust: -25 }
        }
      },
      {
        text: 'Investigate root causes and stabilize at conservative estimate',
        consequences: { cost: 0, time: 0, quality: 20, trust: 25 },
        outcome: {
          icon: 'üìä',
          title: 'Data-Driven Improvement',
          text: 'Found that interruptions and unclear requirements caused variance. Fixed processes. Stabilized at 25 points. Predictability improved dramatically.',
          impact: { budget: 0, timeline: 0, quality: 20, trust: 25 }
        }
      },
      {
        text: 'Hire Agile coach ($8K) to improve estimation practices',
        consequences: { cost: 8, time: 0, quality: 10, trust: 15 },
        outcome: {
          icon: '‚öñÔ∏è',
          title: 'Improved Forecasting',
          text: 'Coach taught planning poker and relative sizing. Used 3-sprint rolling average. Forecast accuracy improved significantly. Worth the investment.',
          impact: { budget: -8, timeline: 0, quality: 10, trust: 15 }
        }
      }
    ]
  },
  {
    icon: 'üíº',
    title: 'Stakeholder Management Nightmare',
    text: 'You have 8 stakeholders, each with different priorities. VP of Sales wants features A & B. CTO wants technical debt addressed. COO wants cost reduction. All are "critical." Remaining budget: $' + (stats.budget) + 'K.',
    choices: [
      {
        text: 'Try to satisfy everyone by doing a little of each',
        consequences: { cost: 15, time: -1, quality: -15, trust: -30 },
        outcome: {
          icon: 'üòµ',
          title: 'Spread Too Thin',
          text: 'Delivered nothing completely. Context switching cost productivity. Wasted $15K on partially completed work. Every stakeholder was disappointed.',
          impact: { budget: -15, timeline: -1, quality: -15, trust: -30 }
        }
      },
      {
        text: 'Facilitate prioritization workshop (cost: $5K for facilitator)',
        consequences: { cost: 5, time: 0, quality: 15, trust: 30 },
        outcome: {
          icon: 'üéØ',
          title: 'Alignment Achieved',
          text: 'Professional facilitator ran excellent workshop. Created shared understanding and agreed priority order. Money well spent. All stakeholders committed.',
          impact: { budget: -5, timeline: 0, quality: 15, trust: 30 }
        }
      },
      {
        text: 'Present data showing capacity and force CEO to decide',
        consequences: { cost: 0, time: 0, quality: 10, trust: 10 },
        outcome: {
          icon: 'üìä',
          title: 'Executive Decision',
          text: 'CEO made the call based on your ROI analysis. Some stakeholders unhappy but respected the data-driven process. No additional costs.',
          impact: { budget: 0, timeline: 0, quality: 10, trust: 10 }
        }
      }
    ]
  },
  {
    icon: 'üìä',
    title: 'Metrics and Reporting Challenge',
    text: 'Leadership wants detailed project status reports with predictive analytics. Your teams say this isn\'t Agile. You\'re spending 10 hours/week on manual reports. Budget: $' + (stats.budget) + 'K.',
    choices: [
      {
        text: 'Continue with detailed manual reports to keep leadership happy',
        consequences: { cost: 10, time: -2, quality: -10, trust: -15 },
        outcome: {
          icon: 'üìÑ',
          title: 'Report Overload',
          text: 'PM spent all time on reports (opportunity cost: $10K). Teams got no support. Project fell behind while you wrote reports nobody read.',
          impact: { budget: -10, timeline: -2, quality: -10, trust: -15 }
        }
      },
      {
        text: 'Build automated dashboard tool ($5K)',
        consequences: { cost: 5, time: 1, quality: 15, trust: 25 },
        outcome: {
          icon: 'üí°',
          title: 'Smart Solution',
          text: 'Invested $5K in dashboard tool showing real-time burndown, velocity, cycle time. Leadership loved it. Saved 8 hours/week. ROI achieved in 3 weeks.',
          impact: { budget: -5, timeline: 1, quality: 15, trust: 25 }
        }
      },
      {
        text: 'Invite leadership to sprint reviews for transparency',
        consequences: { cost: 0, time: 0, quality: 10, trust: 20 },
        outcome: {
          icon: 'üëÄ',
          title: 'Radical Transparency',
          text: 'Leadership saw working software firsthand every 2 weeks. Built trust through demos. Reduced need for formal reports. Zero cost solution.',
          impact: { budget: 0, timeline: 0, quality: 10, trust: 20 }
        }
      }
    ]
  }
];

function loadScenario() {
  const scenario = scenarios[currentScenario];
  
  document.getElementById('scenario-count').textContent = `${currentScenario + 1}/6`;
  
  const scenarioCard = document.getElementById('scenario-card');
  scenarioCard.innerHTML = `
    <div class="scenario-header">
      <div class="scenario-icon">${scenario.icon}</div>
      <div class="scenario-info">
        <div class="scenario-number">Scenario ${currentScenario + 1}</div>
        <div class="scenario-title">${scenario.title}</div>
      </div>
    </div>
    <div class="scenario-text">${scenario.text}</div>
    <div class="choices" id="choices"></div>
  `;
  
  const choicesContainer = document.getElementById('choices');
  scenario.choices.forEach((choice, index) => {
    const btn = document.createElement('button');
    btn.className = 'choice-btn';
    
    let consequencesHTML = '<div class="choice-consequences">';
    if (choice.consequences.cost !== 0) {
      const sign = choice.consequences.cost > 0 ? '-' : '+';
      consequencesHTML += `<span class="consequence-tag cost">üí∞ ${sign}$${Math.abs(choice.consequences.cost)}K</span>`;
    } else {
      consequencesHTML += `<span class="consequence-tag cost">üí∞ $0</span>`;
    }
    if (choice.consequences.time !== 0) {
      const sign = choice.consequences.time > 0 ? '+' : '';
      consequencesHTML += `<span class="consequence-tag time">‚è∞ ${sign}${choice.consequences.time}w</span>`;
    } else {
      consequencesHTML += `<span class="consequence-tag time">‚è∞ On Time</span>`;
    }
    if (choice.consequences.quality !== 0) {
      const sign = choice.consequences.quality > 0 ? '+' : '';
      consequencesHTML += `<span class="consequence-tag quality">‚ú® ${sign}${choice.consequences.quality}%</span>`;
    }
    if (choice.consequences.trust !== 0) {
      const sign = choice.consequences.trust > 0 ? '+' : '';
      consequencesHTML += `<span class="consequence-tag trust">ü§ù ${sign}${choice.consequences.trust}%</span>`;
    }
    consequencesHTML += '</div>';
    
    btn.innerHTML = `<div class="choice-text">${choice.text}</div>${consequencesHTML}`;
    btn.onclick = () => makeChoice(index);
    choicesContainer.appendChild(btn);
  });
  
  updateStats();
}

function makeChoice(choiceIndex) {
  const scenario = scenarios[currentScenario];
  const choice = scenario.choices[choiceIndex];
  const outcome = choice.outcome;
  
  // Update stats
  stats.budget += outcome.impact.budget;
  stats.timeline += outcome.impact.timeline;
  stats.quality += outcome.impact.quality;
  stats.trust += outcome.impact.trust;
  
  // Ensure stats stay within bounds
  stats.budget = Math.max(0, stats.budget);
  stats.quality = Math.max(0, Math.min(100, stats.quality));
  stats.trust = Math.max(0, Math.min(100, stats.trust));
  
  // Show outcome
  document.getElementById('outcome-icon').textContent = outcome.icon;
  document.getElementById('outcome-title').textContent = outcome.title;
  document.getElementById('outcome-text').textContent = outcome.text;
  
  // Show impact
  const impactContainer = document.getElementById('impact-changes');
  impactContainer.innerHTML = '';
  
  if (outcome.impact.budget !== 0) {
    const impactClass = outcome.impact.budget > 0 ? 'positive' : 'negative';
    const impactSign = outcome.impact.budget > 0 ? '+' : '';
    impactContainer.innerHTML += `<div class="impact-item ${impactClass}">Budget: ${impactSign}$${outcome.impact.budget}K</div>`;
  }
  
  if (outcome.impact.timeline !== 0) {
    const impactClass = outcome.impact.timeline > 0 ? 'positive' : 'negative';
    const impactSign = outcome.impact.timeline > 0 ? '+' : '';
    impactContainer.innerHTML += `<div class="impact-item ${impactClass}">Timeline: ${impactSign}${outcome.impact.timeline} weeks</div>`;
  }
  
  if (outcome.impact.quality !== 0) {
    const impactClass = outcome.impact.quality > 0 ? 'positive' : 'negative';
    const impactSign = outcome.impact.quality > 0 ? '+' : '';
    impactContainer.innerHTML += `<div class="impact-item ${impactClass}">Quality: ${impactSign}${outcome.impact.quality}%</div>`;
  }
  
  if (outcome.impact.trust !== 0) {
    const impactClass = outcome.impact.trust > 0 ? 'positive' : 'negative';
    const impactSign = outcome.impact.trust > 0 ? '+' : '';
    impactContainer.innerHTML += `<div class="impact-item ${impactClass}">Trust: ${impactSign}${outcome.impact.trust}%</div>`;
  }
  
  document.getElementById('game-screen').style.display = 'none';
  document.getElementById('outcome-screen').classList.add('show');
}

function nextScenario() {
  document.getElementById('outcome-screen').classList.remove('show');
  
  currentScenario++;
  
  if (currentScenario < 6) {
    document.getElementById('game-screen').style.display = 'block';
    loadScenario();
  } else {
    showFinalResults();
  }
}

function updateStats() {
  // Budget
  const budgetElement = document.getElementById('budget');
  budgetElement.textContent = `$${stats.budget}K`;
  if (stats.budget < 30) {
    budgetElement.className = 'stat-value danger';
  } else if (stats.budget < 60) {
    budgetElement.className = 'stat-value warning';
  } else {
    budgetElement.className = 'stat-value good';
  }
  
  // Timeline
  const timelineElement = document.getElementById('timeline');
  if (stats.timeline > 0) {
    timelineElement.textContent = `${stats.timeline}w Ahead`;
    timelineElement.className = 'stat-value good';
  } else if (stats.timeline < 0) {
    timelineElement.textContent = `${Math.abs(stats.timeline)}w Behind`;
    timelineElement.className = 'stat-value danger';
  } else {
    timelineElement.textContent = 'On Track';
    timelineElement.className = 'stat-value';
  }
  
  // Quality
  const qualityElement = document.getElementById('quality');
  qualityElement.textContent = `${stats.quality}%`;
  if (stats.quality < 60) {
    qualityElement.className = 'stat-value danger';
  } else if (stats.quality < 80) {
    qualityElement.className = 'stat-value warning';
  } else {
    qualityElement.className = 'stat-value good';
  }
  
  // Trust
  const trustElement = document.getElementById('trust');
  trustElement.textContent = `${stats.trust}%`;
  if (stats.trust < 50) {
    trustElement.className = 'stat-value danger';
  } else if (stats.trust < 75) {
    trustElement.className = 'stat-value warning';
  } else {
    trustElement.className = 'stat-value good';
  }
}

function showFinalResults() {
  const avgScore = Math.round((stats.budget + stats.quality + stats.trust) / 3);
  const timelineBonus = stats.timeline >= 0 ? 10 : -10;
  const finalScore = avgScore + timelineBonus;
  
  document.getElementById('final-budget').textContent = `$${stats.budget}K`;
  
  if (stats.timeline > 0) {
    document.getElementById('final-timeline').textContent = `${stats.timeline}w Ahead`;
  } else if (stats.timeline < 0) {
    document.getElementById('final-timeline').textContent = `${Math.abs(stats.timeline)}w Behind`;
  } else {
    document.getElementById('final-timeline').textContent = 'On Time';
  }
  
  document.getElementById('final-quality').textContent = `${stats.quality}%`;
  document.getElementById('final-trust').textContent = `${stats.trust}%`;
  
  let icon = '';
  let message = '';
  
  if (finalScore >= 85 && stats.budget >= 50) {
    icon = 'üèÜ';
    message = 'Outstanding Project Management! You balanced budget, timeline, quality, and stakeholder trust perfectly. You\'re ready to lead complex Agile transformations.';
  } else if (finalScore >= 70) {
    icon = 'üåü';
    message = 'Excellent work! You made strategic decisions that delivered value while maintaining team and stakeholder relationships. Minor improvements in some areas would make you exceptional.';
  } else if (finalScore >= 55) {
    icon = 'üëç';
    message = 'Good effort! You navigated complex challenges and kept the project moving. Focus on building stakeholder trust and managing risks proactively.';
  } else {
    icon = 'üìö';
    message = 'Keep learning! Agile project management requires balancing competing priorities. Review the Agile PM principles and try different strategies.';
  }
  
  // Special messages for specific outcomes
  if (stats.budget < 20) {
    message += ' Critical budget issues need attention - consider better risk management and scope control.';
  }
  if (stats.quality < 50) {
    message += ' Quality suffered significantly - sustainable pace and technical excellence are crucial.';
  }
  if (stats.trust < 40) {
    message += ' Stakeholder trust is damaged - focus on transparent communication and realistic commitments.';
  }
  
  document.getElementById('final-icon').textContent = icon;
  document.getElementById('final-message').textContent = message;
  document.getElementById('final-results').classList.add('show');
}

// Initialize game
loadScenario();
</script>
</body>
</html>
